<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VS</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        /* –°—Ç–∏–ª—ñ –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –±–µ–∑ –∑–º—ñ–Ω */
        body {
            margin: 0;
            overflow: hidden;
            height: 100vh;
            background: radial-gradient(circle at center, #0a0a23 0%, #1e1e5f 70%, #000 100%);
            display: flex;
            font-family: 'Poppins', sans-serif;
            color: #fff;
        }
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        .title {
            position: absolute;
            top: 20px;
            width: 100%;
            color: #00eaff;
            font-family: 'Orbitron', sans-serif;
            font-size: 80px;
            font-weight: 800;
            text-shadow: 0 0 20px rgba(0, 234, 255, 0.8), 0 0 40px rgba(0, 234, 255, 0.5);
            z-index: 2;
            text-align: center;
            letter-spacing: 5px;
            animation: neonGlow 1.5s ease-in-out infinite alternate;
        }
        @keyframes neonGlow {
            from { text-shadow: 0 0 20px rgba(0, 234, 255, 0.8), 0 0 40px rgba(0, 234, 255, 0.5); }
            to { text-shadow: 0 0 30px rgba(0, 234, 255, 1), 0 0 60px rgba(0, 234, 255, 0.7); }
        }
        .main-container {
            display: flex;
            width: 100%;
            height: 100vh;
            z-index: 3;
            position: relative;
        }
        .sidebar {
            width: 250px;
            background: rgba(10, 10, 35, 0.9);
            backdrop-filter: blur(15px);
            padding: 30px 20px;
            border-radius: 0 25px 25px 0;
            box-shadow: 5px 0 50px rgba(0, 234, 255, 0.3);
            display: flex;
            flex-direction: column;
            gap: 15px;
            animation: slideInLeft 1s ease-out;
            overflow-y: auto;
        }
        @keyframes slideInLeft {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        .category-btn {
            background: linear-gradient(45deg, #1e90ff, #ff00ff);
            color: #fff;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-family: 'Orbitron', sans-serif;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(0, 234, 255, 0.4);
            text-align: left;
        }
        .category-btn:hover, .category-btn.active {
            transform: translateX(5px);
            box-shadow: 0 8px 25px rgba(0, 234, 255, 0.6);
            background: linear-gradient(45deg, #ff00ff, #00eaff);
        }
        .product-panel {
            flex: 1;
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            justify-content: center;
            align-items: flex-start;
            gap: 20px;
            padding: 50px;
            overflow-y: auto;
            animation: float 4s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        .product-card {
            width: 220px;
            background: linear-gradient(45deg, #1e90ff, #ff00ff);
            border-radius: 20px;
            padding: 15px;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .product-card:hover {
            transform: scale(1.1) rotate(2deg);
            box-shadow: 0 15px 30px rgba(0, 234, 255, 0.5);
        }
        .product-image {
            width: 100%;
            height: 200px;
            background-size: cover;
            background-position: center;
            border-radius: 15px;
        }
        .product-info {
            margin-top: 10px;
            font-size: 16px;
            font-weight: 400;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .product-info h3 {
            margin: 5px 0;
            font-family: 'Orbitron', sans-serif;
            font-size: 20px;
            color: #00eaff;
        }
        .pay-button {
            background: linear-gradient(45deg, #ff00ff, #00eaff);
            color: #fff;
            padding: 12px 40px;
            border: none;
            border-radius: 10px;
            font-family: 'Orbitron', sans-serif;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(0, 234, 255, 0.4);
            margin-top: auto;
        }
        .pay-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 234, 255, 0.6);
        }
        .pay-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .no-products {
            text-align: center;
            font-size: 18px;
            color: #00eaff;
            font-family: 'Orbitron', sans-serif;
            width: 100%;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 4;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.4s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .modal-content {
            background: linear-gradient(135deg, #1a1a2e, #2a2a5e);
            padding: 40px;
            border-radius: 20px;
            width: 450px;
            max-width: 95%;
            text-align: center;
            box-shadow: 0 10px 50px rgba(0, 234, 255, 0.3);
            position: relative;
            animation: slideIn 0.4s ease;
            max-height: 85vh;
            overflow-y: auto;
            color: #fff;
        }
        @keyframes slideIn {
            from { transform: translateY(-100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .modal-content select, .modal-content input {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 2px solid #00eaff;
            border-radius: 10px;
            box-sizing: border-box;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff !important;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        .modal-content select:focus, .modal-content input:focus {
            border-color: #ff00ff;
            box-shadow: 0 0 10px rgba(255, 0, 255, 0.5);
            outline: none;
        }
        .modal-content select option {
            background: #2a2a5e;
            color: #fff !important;
        }
        .modal-content .error {
            border-color: #ff4d4d;
        }
        .modal-content .error-message {
            color: #ff4d4d;
            font-size: 14px;
            margin: -5px 0 10px;
            display: none;
        }
        .modal-content button {
            background: linear-gradient(45deg, #ff00ff, #00eaff);
            color: #fff;
            padding: 12px 40px;
            border: none;
            border-radius: 10px;
            font-family: 'Orbitron', sans-serif;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(0, 234, 255, 0.4);
        }
        .modal-content button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 234, 255, 0.6);
        }
        .modal-content button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .close {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 30px;
            color: #00eaff;
            cursor: pointer;
            transition: color 0.3s ease, transform 0.3s ease;
        }
        .close:hover {
            color: #ff00ff;
            transform: rotate(90deg);
        }
        .loading {
            color: #00eaff;
            font-style: italic;
            font-size: 16px;
        }
        .search-container {
            position: relative;
            margin: 10px 0;
        }
        .search-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #00eaff;
            border-radius: 10px;
            box-sizing: border-box;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }
        .search-input:focus {
            border-color: #ff00ff;
            box-shadow: 0 0 10px rgba(255, 0, 255, 0.5);
            outline: none;
        }
        .search-results, .postomat-list {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(10, 10, 35, 0.9);
            border: 2px solid #00eaff;
            border-radius: 10px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 10;
            display: none;
            box-shadow: 0 5px 20px rgba(0, 234, 255, 0.3);
        }
        .search-result-item, .postomat-item {
            padding: 12px;
            cursor: pointer;
            border-bottom: 1px solid rgba(0, 234, 255, 0.2);
            color: #fff;
            transition: background 0.2s ease;
        }
        .search-result-item:hover, .postomat-item:hover {
            background: rgba(0, 234, 255, 0.2);
        }
        .search-result-item:last-child, .postomat-item:last-child {
            border-bottom: none;
        }
        @media (max-width: 768px) {
            .title { font-size: 48px; padding: 15px 0; }
            .sidebar { width: 200px; padding: 20px 15px; }
            .product-panel { padding: 20px; gap: 15px; }
            .product-card { width: 160px; }
            .product-image { height: 140px; }
            .pay-button { padding: 10px 20px; font-size: 16px; }
            .modal-content { width: 90%; padding: 25px; }
        }
        @media (max-width: 480px) {
            .title { font-size: 36px; letter-spacing: 2px; }
            .main-container { flex-direction: column; }
            .sidebar { width: 100%; height: auto; border-radius: 25px 25px 0 0; }
            .product-panel { padding: 15px; flex-direction: column; align-items: center; }
            .product-card { width: 280px; max-width: 100%; }
            .product-image { height: 180px; }
            .pay-button { padding: 10px 30px; font-size: 16px; }
        }
    </style>
</head>
<body>
    <div class="title">VIZMU SOBI</div>
    <canvas id="spaceCanvas"></canvas>
    <div class="main-container">
        <nav class="sidebar">
            <button class="category-btn active" data-category="–í—Å—ñ">–í—Å—ñ —Ç–æ–≤–∞—Ä–∏</button>
            <button class="category-btn" data-category="–®—Ç–∞–Ω–∏">–®—Ç–∞–Ω–∏</button>
            <button class="category-btn" data-category="–ö–æ—Ñ—Ç–∏">–ö–æ—Ñ—Ç–∏</button>
            <button class="category-btn" data-category="–ü–æ–Ω—á–æ">–ü–æ–Ω—á–æ</button>
            <button class="category-btn" data-category="–û–¥–µ—è–ª–∞">–û–¥–µ—è–ª–∞</button>
        </nav>
        <div class="product-panel" id="productPanel">
            <!-- –ü—Ä–æ–¥—É–∫—Ç–∏ –±—É–¥—É—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏—Ç–∏—Å—è —Å—é–¥–∏ -->
        </div>
    </div>
    <div class="modal" id="deliveryModal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>–û—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</h2>
            <form id="deliveryForm">
                <select id="city" aria-label="–û–±–µ—Ä—ñ—Ç—å –º—ñ—Å—Ç–æ">
                    <option value="" disabled selected>–û–±–µ—Ä—ñ—Ç—å –º—ñ—Å—Ç–æ</option>
                    <option value="–ö–∏—ó–≤">–ö–∏—ó–≤</option>
                    <option value="–õ—å–≤—ñ–≤">–õ—å–≤—ñ–≤</option>
                    <option value="–û–¥–µ—Å–∞">–û–¥–µ—Å–∞</option>
                    <option value="–•–∞—Ä–∫—ñ–≤">–•–∞—Ä–∫—ñ–≤</option>
                    <option value="–î–Ω—ñ–ø—Ä–æ">–î–Ω—ñ–ø—Ä–æ</option>
                    <option value="–ó–∞–ø–æ—Ä—ñ–∂–∂—è">–ó–∞–ø–æ—Ä—ñ–∂–∂—è</option>
                    <option value="–í—ñ–Ω–Ω–∏—Ü—è">–í—ñ–Ω–Ω–∏—Ü—è</option>
                    <option value="–•–º–µ–ª—å–Ω–∏—Ü—å–∫–∏–π">–•–º–µ–ª—å–Ω–∏—Ü—å–∫–∏–π</option>
                    <option value="–ß–µ—Ä–Ω—ñ–≤—Ü—ñ">–ß–µ—Ä–Ω—ñ–≤—Ü—ñ</option>
                    <option value="–Ü–≤–∞–Ω–æ-–§—Ä–∞–Ω–∫—ñ–≤—Å—å–∫">–Ü–≤–∞–Ω–æ-–§—Ä–∞–Ω–∫—ñ–≤—Å—å–∫</option>
                    <option value="–¢–µ—Ä–Ω–æ–ø—ñ–ª—å">–¢–µ—Ä–Ω–æ–ø—ñ–ª—å</option>
                    <option value="–†—ñ–≤–Ω–µ">–†—ñ–≤–Ω–µ</option>
                    <option value="–õ—É—Ü—å–∫">–õ—É—Ü—å–∫</option>
                    <option value="–ñ–∏—Ç–æ–º–∏—Ä">–ñ–∏—Ç–æ–º–∏—Ä</option>
                    <option value="–ß–µ—Ä–∫–∞—Å–∏">–ß–µ—Ä–∫–∞—Å–∏</option>
                    <option value="–ö—Ä–æ–ø–∏–≤–Ω–∏—Ü—å–∫–∏–π">–ö—Ä–æ–ø–∏–≤–Ω–∏—Ü—å–∫–∏–π</option>
                    <option value="–ú–∏–∫–æ–ª–∞—ó–≤">–ú–∏–∫–æ–ª–∞—ó–≤</option>
                    <option value="–•–µ—Ä—Å–æ–Ω">–•–µ—Ä—Å–æ–Ω</option>
                    <option value="–°—É–º–∏">–°—É–º–∏</option>
                    <option value="–ß–µ—Ä–Ω—ñ–≥—ñ–≤">–ß–µ—Ä–Ω—ñ–≥—ñ–≤</option>
                </select>
                <div class="error-message" id="cityError">–ë—É–¥—å –ª–∞—Å–∫–∞, –æ–±–µ—Ä—ñ—Ç—å –º—ñ—Å—Ç–æ</div>
                <div id="districtSection" style="display: none;">
                    <select id="district" aria-label="–û–±–µ—Ä—ñ—Ç—å —Ä–∞–π–æ–Ω">
                        <option value="" disabled selected>–û–±–µ—Ä—ñ—Ç—å —Ä–∞–π–æ–Ω (–¥–ª—è –ñ–∏—Ç–æ–º–∏—Ä–∞)</option>
                        <option value="zhytomyr">–ñ–∏—Ç–æ–º–∏—Ä</option>
                        <option value="berdychiv">–ë–µ—Ä–¥–∏—á—ñ–≤</option>
                        <option value="korosten">–ö–æ—Ä–æ—Å—Ç–µ–Ω—å</option>
                        <option value="novohrad-volynskyi">–ù–æ–≤–æ–≥—Ä–∞–¥-–í–æ–ª–∏–Ω—Å—å–∫–∏–π</option>
                    </select>
                </div>
                <div class="search-container">
                    <input type="text" id="postomatSearch" class="search-input" placeholder="–ü–æ—à—É–∫ –ø–æ—à—Ç–æ–º–∞—Ç–∞ –∞–±–æ –≤–≤–µ–¥—ñ—Ç—å –∞–¥—Ä–µ—Å—É" aria-label="–ü–æ—à—É–∫ –ø–æ—à—Ç–æ–º–∞—Ç–∞">
                    <div id="searchResults" class="search-results"></div>
                </div>
                <div id="postomatList" class="postomat-list"></div>
                <div id="postomatLoading" class="loading" style="display: none;">–ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –ø–æ—à—Ç–æ–º–∞—Ç–∏...</div>
                <div id="postomatError" class="error-message" style="display: none;">–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–æ—à—Ç–æ–º–∞—Ç—ñ–≤</div>
                <input type="text" id="deliveryAddress" placeholder="–í–≤–µ–¥—ñ—Ç—å –∞–¥—Ä–µ—Å—É –¥–æ—Å—Ç–∞–≤–∫–∏ (—è–∫—â–æ –Ω–µ –ø–æ—à—Ç–æ–º–∞—Ç)" aria-label="–ê–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏">
                <div class="error-message" id="addressError">–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å –∞–¥—Ä–µ—Å—É –∞–±–æ –æ–±–µ—Ä—ñ—Ç—å –ø–æ—à—Ç–æ–º–∞—Ç</div>
                <input type="text" id="name" placeholder="–í–∞—à–µ —ñ–º'—è —Ç–∞ –ø—Ä—ñ–∑–≤–∏—â–µ" aria-label="–Ü–º'—è —Ç–∞ –ø—Ä—ñ–∑–≤–∏—â–µ">
                <div class="error-message" id="nameError">–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å —ñ–º'—è —Ç–∞ –ø—Ä—ñ–∑–≤–∏—â–µ</div>
                <input type="tel" id="phone" placeholder="–í–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É" aria-label="–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É">
                <div class="error-message" id="phoneError">–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω–∏–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É</div>
                <button id="submitButton" type="button" onclick="submitDelivery()">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏</button>
            </form>
        </div>
    </div>
    <script>
        const canvas = document.getElementById('spaceCanvas');
        const ctx = canvas.getContext('2d');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const stars = [];
        const planets = [];
        const numStars = 200;

        class Star {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 4 + 2;
                this.speedX = (Math.random() - 0.5) * 0.5;
                this.speedY = (Math.random() - 0.5) * 0.5;
                this.opacity = Math.random() * 0.5 + 0.5;
                this.opacitySpeed = Math.random() * 0.02 + 0.01;
                this.phase = Math.random() * Math.PI * 2;
                const colors = ['#ffffff', '#ffeb3b', '#80d8ff', '#ff6f61', '#00eaff'];
                this.color = colors[Math.floor(Math.random() * colors.length)];
            }

            update() {
                this.x += this.speedX;
                this.y += this.speedY;
                this.opacity = 0.5 + 0.5 * Math.sin(this.phase);
                this.phase += this.opacitySpeed;
                if (this.x < 0) this.x = canvas.width;
                if (this.x > canvas.width) this.x = 0;
                if (this.y < 0) this.y = canvas.height;
                if (this.y > canvas.height) this.y = 0;
            }

            draw() {
                const gradient = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, this.size * 2);
                gradient.addColorStop(0, `${this.color}${Math.round(this.opacity * 255).toString(16).padStart(2, '0')}`);
                gradient.addColorStop(1, `${this.color}00`);
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fillStyle = gradient;
                ctx.fill();
            }
        }

        class Planet {
            constructor(type) {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 30 + 20;
                this.speedX = (Math.random() - 0.5) * 0.2;
                this.speedY = (Math.random() - 0.5) * 0.2;
                this.type = type || ['earth', 'mars', 'venus'][Math.floor(Math.random() * 3)];

                if (this.type === 'earth') {
                    this.color = '#00ff00';
                    this.overlayColor = '#87ceeb';
                } else if (this.type === 'mars') {
                    this.color = '#ff4500';
                    this.overlayColor = '#8b4513';
                } else if (this.type === 'venus') {
                    this.color = '#ffd700';
                    this.overlayColor = '#ffa500';
                }
            }

            update() {
                this.x += this.speedX;
                this.y += this.speedY;
                if (this.x < 0) this.x = canvas.width;
                if (this.x > canvas.width) this.x = 0;
                if (this.y < 0) this.y = canvas.height;
                if (this.y > canvas.height) this.y = 0;
            }

            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.fill();

                ctx.beginPath();
                if (this.type === 'earth') {
                    ctx.arc(this.x - this.size * 0.3, this.y - this.size * 0.2, this.size * 0.4, 0, Math.PI * 2);
                    ctx.fillStyle = this.overlayColor;
                    ctx.fill();
                    ctx.beginPath();
                    ctx.arc(this.x + this.size * 0.2, this.y + this.size * 0.3, this.size * 0.3, 0, Math.PI * 2);
                    ctx.fillStyle = '#ffffff';
                    ctx.fill();
                } else if (this.type === 'mars') {
                    ctx.arc(this.x - this.size * 0.2, this.y - this.size * 0.3, this.size * 0.5, 0, Math.PI * 2);
                    ctx.fillStyle = this.overlayColor;
                    ctx.fill();
                } else if (this.type === 'venus') {
                    ctx.arc(this.x + this.size * 0.3, this.y - this.size * 0.2, this.size * 0.4, 0, Math.PI * 2);
                    ctx.fillStyle = this.overlayColor;
                    ctx.fill();
                }

                ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
                ctx.lineWidth = 2;
                ctx.stroke();
            }
        }

        for (let i = 0; i < numStars; i++) {
            stars.push(new Star());
        }
        for (let i = 0; i < 3; i++) {
            planets.push(new Planet(['earth', 'mars', 'venus'][i]));
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            stars.forEach(star => {
                star.update();
                star.draw();
            });
            planets.forEach(planet => {
                planet.update();
                planet.draw();
            });
            requestAnimationFrame(animate);
        }

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        animate();

        // –û–Ω–æ–≤–ª–µ–Ω–∏–π –º–∞—Å–∏–≤ –ø—Ä–æ–¥—É–∫—Ç—ñ–≤ —ñ–∑ –Ω–æ–≤–∏–º —Ç–æ–≤–∞—Ä–æ–º
        const products = [
            { name: '–°–æ—Ä–æ—á–∫–∞ –±—ñ–ª–∞, Primark', price: '300 –≥—Ä–Ω', image: 'https://i.postimg.cc/xT2TB5sw/de.webp', category: '–ü–æ–Ω—á–æ' },
            { name: '–ö–æ—Ñ—Ç–∞ —á–æ–ª–æ–≤—ñ—á–∞, XL', price: '299 –≥—Ä–Ω', image: 'https://i.postimg.cc/Zqd51QSz/3dwed.webp', category: '–ö–æ—Ñ—Ç–∏' },
            { name: '–î–∂–∏–Ω—Å–∏ –Ω–∞ —Ö–ª–æ–ø—á–∏–∫–∞ 10-11 —Ä–æ–∫—ñ–≤', price: '315 –≥—Ä–Ω', image: 'https://i.postimg.cc/8cPDPKq6/dd.webp', category: '–®—Ç–∞–Ω–∏' },
            { name: '–°–ø—ñ–¥–Ω–∏—Ü—è-—à–æ—Ä—Ç–∏ –Ω–∞ –¥—ñ–≤—á–∏–Ω–∫—É 8-9 —Ä–æ–∫—ñ–≤', price: '199 –≥—Ä–Ω', image: 'https://i.postimg.cc/kMhLbgSw/ee.webp', category: '–ü–æ–Ω—á–æ' },
            { name: '–ö–æ—Ñ—Ç–∞ –Ω–∞ —Ö–ª–æ–ø—á–∏–∫–∞ 10-11 —Ä–æ–∫—ñ–≤', price: '245 –≥—Ä–Ω', image: 'https://i.postimg.cc/BbGpxRqc/dws.webp', category: '–ö–æ—Ñ—Ç–∏' },
            { name: '–ó–µ–ª–µ–Ω–µ –û–¥–µ—è–ª–æ', price: '760 –≥—Ä–Ω', image: 'https://i.postimg.cc/LsvNkhGW/f.webp', category: '–û–¥–µ—è–ª–∞' }
        ];

        // –û–Ω–æ–≤–ª–µ–Ω–∏–π –º–∞—Å–∏–≤ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
        const categories = ['–í—Å—ñ', '–®—Ç–∞–Ω–∏', '–ö–æ—Ñ—Ç–∏', '–ü–æ–Ω—á–æ', '–û–¥–µ—è–ª–∞'];
        const productPanel = document.getElementById('productPanel');
        const categoryBtns = document.querySelectorAll('.category-btn');
        let currentCategory = '–í—Å—ñ';

        function renderProducts(category) {
            const filteredProducts = category === '–í—Å—ñ' ? products : products.filter(p => p.category === category);
            productPanel.innerHTML = '';
            if (filteredProducts.length === 0) {
                productPanel.innerHTML = '<div class="no-products">–ù–µ–º–∞—î —Ç–æ–≤–∞—Ä—ñ–≤ —É —Ü—ñ–π –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó</div>';
                return;
            }
            filteredProducts.forEach(product => {
                const card = document.createElement('div');
                card.className = 'product-card';
                card.innerHTML = `
                    <div class="product-image" style="background-image: url('${product.image}');"></div>
                    <div class="product-info">
                        <h3>${product.name}</h3>
                        <p>–¶—ñ–Ω–∞: ${product.price}</p>
                        <button class="pay-button" onclick="buyProduct('${product.name}', '${product.price}')">–ö—É–ø–∏—Ç–∏</button>
                    </div>
                `;
                productPanel.appendChild(card);
            });
        }

        categoryBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                categoryBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentCategory = btn.dataset.category;
                renderProducts(currentCategory);
            });
        });

        // –ü–æ—á–∞—Ç–∫–æ–≤–∏–π —Ä–µ–Ω–¥–µ—Ä
        renderProducts('–í—Å—ñ');

        const postomatsData = {
            "–ö–∏—ó–≤": [
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ3002, –°—Ç–æ–ª–∏—á–Ω–µ —à–æ—Å–µ, 103 (–ë–¶ –ï–≤—Ä–æ–ø–∞)",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ3003, –≤—É–ª. –ì–µ–Ω–µ—Ä–∞–ª–∞ –ê–ª–º–∞–∑–æ–≤–∞, 11",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ3033, –ø—Ä–æ—Å–ø. –ü–µ—Ç—Ä–∞ –ì—Ä–∏–≥–æ—Ä–µ–Ω–∫–∞, 33/44",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ3034, –≤—É–ª. –ó–¥–æ–ª–±—É–Ω—ñ–≤—Å—å–∫–∞, 17 (–ê—à–∞–Ω 2 –ø–æ–≤–µ—Ä—Ö)",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ3035, –≤—É–ª. –†–µ–≤—É—Ü—å–∫–æ–≥–æ, 26",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ3038, –ø—Ä–æ—Å–ø. –°. –ë–∞–Ω–¥–µ—Ä–∏, 15–ê (–ê—à–∞–Ω 1 –ø–æ–≤–µ—Ä—Ö)",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ3040, –≤—É–ª. –Ñ–ª–∏–∑–∞–≤–µ—Ç–∏ –ß–∞–≤–¥–∞—Ä, 13",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ3041, –≤—É–ª. –ö–æ–ª–µ–∫—Ç–æ—Ä–Ω–∞, 3–∞",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ3042, –≤—É–ª. –ê–Ω–Ω–∏ –ê—Ö–º–∞—Ç–æ–≤–æ—ó, 31"
            ],
            "–õ—å–≤—ñ–≤": [
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ2001, –≤—É–ª. –ì–æ—Ä–æ–¥–æ—Ü—å–∫–∞, 160",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ2002, –≤—É–ª. –ó–µ–ª–µ–Ω–∞, 32",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ2003, –ø—Ä–æ—Å–ø. –ß–µ—Ä–≤–æ–Ω–æ—ó –ö–∞–ª–∏–Ω–∏, 83",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ25392, –ø—Ä–æ—Å–ø. –ù–µ–∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ, 91 (–º–∞–≥. –¢–∞–π—Å—Ç—Ä–∞)"
            ],
            "–û–¥–µ—Å–∞": [
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ4001, –≤—É–ª. –†—ñ—à–µ–ª—å—î–≤—Å—å–∫–∞, 35",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ4002, –≤—É–ª. –§–æ–Ω—Ç–∞–Ω—Å—å–∫–∞ –¥–æ—Ä–æ–≥–∞, 23"
            ],
            "–•–∞—Ä–∫—ñ–≤": [
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ3085, –ø—Ä–æ—Å–ø. –ü–µ—Ä–µ–º–æ–≥–∏, 46 (‚Ññ7)",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ3158, –≤—É–ª. –ö–ª–æ—á–∫—ñ–≤—Å—å–∫–∞, 99–∞ (‚Ññ50)",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ3159, –≤—É–ª. –°—É–º—Å—å–∫–∞, 48",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ5001, –ø—Ä–æ—Å–ø. –ì–µ—Ä–æ—ó–≤ –•–∞—Ä–∫–æ–≤–∞, 199"
            ],
            "–î–Ω—ñ–ø—Ä–æ": [
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ6001, –≤—É–ª. –°—ñ—á–µ—Å–ª–∞–≤—Å—å–∫–∞ –ù–∞–±–µ—Ä–µ–∂–Ω–∞, 15",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ6002, –ø—Ä–æ—Å–ø. –î–º–∏—Ç—Ä–∞ –Ø–≤–æ—Ä–Ω–∏—Ü—å–∫–æ–≥–æ, 50"
            ],
            "–ó–∞–ø–æ—Ä—ñ–∂–∂—è": [
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ7001, –≤—É–ª. –ü–µ—Ä–µ–º–æ–≥–∏, 141",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ7002, –ø—Ä–æ—Å–ø. –°–æ–±–æ—Ä–Ω–∏–π, 152"
            ],
            "–í—ñ–Ω–Ω–∏—Ü—è": [
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ8001, –≤—É–ª. –°–æ–±–æ—Ä–Ω–∞, 89",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ8002, –≤—É–ª. –ö–∏—ó–≤—Å—å–∫–∞, 36"
            ],
            "–•–º–µ–ª—å–Ω–∏—Ü—å–∫–∏–π": [
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ9001, –≤—É–ª. –ü—Ä–æ—Å–∫—É—Ä—ñ–≤—Å—å–∫–∞, 24",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ9002, –≤—É–ª. –ö–∞–º'—è–Ω–µ—Ü—å–∫–∞, 114"
            ],
            "–ß–µ—Ä–Ω—ñ–≤—Ü—ñ": [
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ10001, –≤—É–ª. –ì–æ–ª–æ–≤–Ω–∞, 266",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ10002, –≤—É–ª. –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞, 32"
            ],
            "–Ü–≤–∞–Ω–æ-–§—Ä–∞–Ω–∫—ñ–≤—Å—å–∫": [
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ11001, –≤—É–ª. –ì–∞–ª–∏—Ü—å–∫–∞, 140",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ11002, –≤—É–ª. –í–æ–≤—á–∏–Ω–µ—Ü—å–∫–∞, 209"
            ],
            "–¢–µ—Ä–Ω–æ–ø—ñ–ª—å": [
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ12001, –≤—É–ª. 15 –ö–≤—ñ—Ç–Ω—è, 7",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ12002, –ø—Ä–æ—Å–ø. –ó–ª—É–∫–∏, 20"
            ],
            "–†—ñ–≤–Ω–µ": [
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ13001, –≤—É–ª. –°–æ–±–æ—Ä–Ω–∞, 288",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ13002, –≤—É–ª. –í—ñ–¥—ñ–Ω—Å—å–∫–∞, 15"
            ],
            "–õ—É—Ü—å–∫": [
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ14001, –≤—É–ª. –õ–µ—Å—ñ –£–∫—Ä–∞—ó–Ω–∫–∏, 67",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ14002, –ø—Ä–æ—Å–ø. –í–æ–ª—ñ, 6"
            ],
            "–ñ–∏—Ç–æ–º–∏—Ä": {
                "zhytomyr": [
                    "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ15003, –≤—É–ª. –ö–∏—ó–≤—Å—å–∫–∞, 40",
                    "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ15004, –º–∞–π–¥–∞–Ω –ü–µ—Ä–µ–º–æ–≥–∏, 2",
                    "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ15005, –≤—É–ª. –¢–µ–∞—Ç—Ä–∞–ª—å–Ω–∞, 12",
                    "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ15006, –ø—Ä–æ—Å–ø. –ú–∏—Ä—É, 15"
                ],
                "berdychiv": [
                    "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ15007, –≤—É–ª. –Ñ–≤—Ä–æ–ø–µ–π—Å—å–∫–∞, 132",
                    "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ15008, –≤—É–ª. –®–µ–≤—á–µ–Ω–∫–∞, 50",
                    "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ15009, –ø—Ä–æ—Å–ø. –•—ñ–º—ñ–∫—ñ–≤, 20"
                ],
                "korosten": [
                    "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ15010, –≤—É–ª. –ì—Ä—É—à–µ–≤—Å—å–∫–æ–≥–æ, 52–≥",
                    "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ15011, –≤—É–ª. –î–æ–≤–∂–µ–Ω–∫–∞, 10",
                    "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ15012, –ø—Ä–æ—Å–ø. –ü–µ—Ä–µ–º–æ–≥–∏, 25"
                ],
                "novohrad-volynskyi": [
                    "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ15013, –≤—É–ª. –û–ª–µ–∫—Å–∞–Ω–¥—Ä–∞ –ß–µ—Ä–Ω—è–≤—Å—å–∫–æ–≥–æ, 46",
                    "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ15014, –≤—É–ª. –ñ–∏—Ç–æ–º–∏—Ä—Å—å–∫–∞, 30",
                    "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ15015, –º–∞–π–¥–∞–Ω –®–µ–≤—á–µ–Ω–∫–∞, 5"
                ]
            },
            "–ß–µ—Ä–∫–∞—Å–∏": [
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ16001, –±—É–ª—å–≤. –®–µ–≤—á–µ–Ω–∫–∞, 307",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ16002, –≤—É–ª. –•—Ä–µ—â–∞—Ç–∏–∫, 196"
            ],
            "–ö—Ä–æ–ø–∏–≤–Ω–∏—Ü—å–∫–∏–π": [
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ17001, –≤—É–ª. –í–µ–ª–∏–∫–∞ –ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω–∞, 16",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ17002, –≤—É–ª. –ß–æ—Ä–Ω–æ–≤–æ–ª–∞, 24"
            ],
            "–ú–∏–∫–æ–ª–∞—ó–≤": [
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ18001, –≤—É–ª. –ê–¥–º—ñ—Ä–∞–ª—å—Å—å–∫–∞, 25",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ18002, –ø—Ä–æ—Å–ø. –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∏–π, 3"
            ],
            "–•–µ—Ä—Å–æ–Ω": [
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ19001, –≤—É–ª. –°—É–≤–æ—Ä–æ–≤–∞, 42",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ19002, –≤—É–ª. 49-—ó –ì–≤–∞—Ä–¥—ñ–π—Å—å–∫–æ—ó, 10"
            ],
            "–°—É–º–∏": [
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ20001, –≤—É–ª. –•–∞—Ä–∫—ñ–≤—Å—å–∫–∞, 42",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ20002, –ø—Ä–æ—Å–ø. –®–µ–≤—á–µ–Ω–∫–∞, 29"
            ],
            "–ß–µ—Ä–Ω—ñ–≥—ñ–≤": [
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ21001, –≤—É–ª. –®–µ–≤—á–µ–Ω–∫–∞, 79",
                "–ü–æ—à—Ç–æ–º–∞—Ç ‚Ññ21002, –ø—Ä–æ—Å–ø. –ü–µ—Ä–µ–º–æ–≥–∏, 127"
            ]
        };

        const modal = document.getElementById('deliveryModal');
        const citySelect = document.getElementById('city');
        const districtSelect = document.getElementById('district');
        const districtSection = document.getElementById('districtSection');
        const postomatSearch = document.getElementById('postomatSearch');
        const searchResults = document.getElementById('searchResults');
        const postomatList = document.getElementById('postomatList');
        const postomatLoading = document.getElementById('postomatLoading');
        const postomatError = document.getElementById('postomatError');
        const deliveryAddressInput = document.getElementById('deliveryAddress');
        const nameInput = document.getElementById('name');
        const phoneInput = document.getElementById('phone');
        const submitButton = document.getElementById('submitButton');
        const cityError = document.getElementById('cityError');
        const addressError = document.getElementById('addressError');
        const nameError = document.getElementById('nameError');
        const phoneError = document.getElementById('phoneError');

        let currentProduct = { name: '', price: '' };
        let currentPostomats = [];
        let searchTimeout;

        citySelect.addEventListener('change', loadDistrictsAndPostomats);
        districtSelect.addEventListener('change', loadPostomats);

        function buyProduct(name, price) {
            currentProduct = { name, price };
            openModal();
        }

        function loadDistrictsAndPostomats() {
            const city = citySelect.value;
            districtSection.style.display = 'none';
            searchResults.style.display = 'none';
            postomatSearch.value = '';
            postomatList.style.display = 'none';
            postomatLoading.style.display = 'none';
            postomatError.style.display = 'none';
            deliveryAddressInput.style.display = 'block';

            if (city && postomatsData[city] && typeof postomatsData[city] === 'object' && !Array.isArray(postomatsData[city])) {
                districtSection.style.display = 'block';
                districtSelect.value = localStorage.getItem('selectedDistrict') || '';
                currentPostomats = [];
                if (districtSelect.value) loadPostomats();
            } else if (city && Array.isArray(postomatsData[city])) {
                loadPostomatsFromArray(postomatsData[city]);
            } else {
                currentPostomats = [];
            }
        }

        function loadPostomats() {
            const city = citySelect.value;
            const district = districtSelect.value;
            searchResults.style.display = 'none';
            postomatSearch.value = '';
            postomatList.style.display = 'none';
            postomatLoading.style.display = 'block';
            postomatError.style.display = 'none';
            deliveryAddressInput.style.display = 'block';

            if (city && district && postomatsData[city] && postomatsData[city][district]) {
                loadPostomatsFromArray(postomatsData[city][district]);
            } else if (city && Array.isArray(postomatsData[city])) {
                loadPostomatsFromArray(postomatsData[city]);
            } else {
                currentPostomats = [];
                postomatLoading.style.display = 'none';
            }
        }

        function loadPostomatsFromArray(postomats) {
            setTimeout(() => {
                currentPostomats = postomats;
                displayPostomats(postomats);
                const savedAddress = localStorage.getItem('selectedPostomat');
                if (savedAddress && postomats.includes(savedAddress)) {
                    postomatSearch.value = savedAddress;
                    deliveryAddressInput.value = savedAddress;
                    deliveryAddressInput.style.display = 'none';
                }
                postomatLoading.style.display = 'none';
                postomatList.style.display = 'block';
            }, 800);
        }

        function displayPostomats(postomats) {
            postomatList.innerHTML = '';
            postomats.slice(0, 10).forEach(postomat => {
                const item = document.createElement('div');
                item.className = 'postomat-item';
                item.textContent = postomat;
                item.addEventListener('click', () => {
                    postomatSearch.value = postomat;
                    deliveryAddressInput.value = postomat;
                    deliveryAddressInput.style.display = 'none';
                    searchResults.style.display = 'none';
                    localStorage.setItem('selectedPostomat', postomat);
                });
                postomatList.appendChild(item);
            });
        }

        postomatSearch.addEventListener('input', function() {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                const query = this.value.toLowerCase().trim();
                if (query.length < 2) {
                    searchResults.style.display = 'none';
                    displayPostomats(currentPostomats);
                    return;
                }
                const filtered = currentPostomats.filter(addr => addr.toLowerCase().includes(query));
                displaySearchResults(filtered);
            }, 300);
        });

        function displaySearchResults(results) {
            searchResults.innerHTML = '';
            if (results.length === 0) {
                const noResult = document.createElement('div');
                noResult.className = 'search-result-item';
                noResult.textContent = '–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ';
                searchResults.appendChild(noResult);
            } else {
                results.slice(0, 10).forEach(result => {
                    const item = document.createElement('div');
                    item.className = 'search-result-item';
                    item.textContent = result;
                    item.addEventListener('click', () => {
                        postomatSearch.value = result;
                        deliveryAddressInput.value = result;
                        deliveryAddressInput.style.display = 'none';
                        searchResults.style.display = 'none';
                        localStorage.setItem('selectedPostomat', result);
                    });
                    searchResults.appendChild(item);
                });
            }
            searchResults.style.display = 'block';
        }

        document.addEventListener('click', function(e) {
            if (!postomatSearch.contains(e.target) && !searchResults.contains(e.target)) {
                searchResults.style.display = 'none';
            }
        });

        postomatSearch.addEventListener('focus', function() {
            if (currentPostomats.length > 0 && this.value.trim()) {
                displaySearchResults(currentPostomats.filter(addr => addr.toLowerCase().includes(this.value.toLowerCase().trim())));
            }
        });

        function openModal() {
            modal.style.display = 'flex';
            const savedCity = localStorage.getItem('selectedCity');
            if (savedCity && citySelect.querySelector(`option[value="${savedCity}"]`)) {
                citySelect.value = savedCity;
                loadDistrictsAndPostomats();
            }
        }

        function closeModal() {
            modal.style.display = 'none';
            citySelect.value = '';
            districtSelect.value = '';
            districtSection.style.display = 'none';
            postomatSearch.value = '';
            postomatList.innerHTML = '';
            postomatList.style.display = 'none';
            deliveryAddressInput.value = '';
            deliveryAddressInput.style.display = 'block';
            nameInput.value = '';
            phoneInput.value = '';
            citySelect.classList.remove('error');
            deliveryAddressInput.classList.remove('error');
            nameInput.classList.remove('error');
            phoneInput.classList.remove('error');
            cityError.style.display = 'none';
            addressError.style.display = 'none';
            nameError.style.display = 'none';
            phoneError.style.display = 'none';
            postomatError.style.display = 'none';
            searchResults.style.display = 'none';
        }

        function validateForm() {
            let isValid = true;
            citySelect.classList.remove('error');
            deliveryAddressInput.classList.remove('error');
            nameInput.classList.remove('error');
            phoneInput.classList.remove('error');
            cityError.style.display = 'none';
            addressError.style.display = 'none';
            nameError.style.display = 'none';
            phoneError.style.display = 'none';

            if (!citySelect.value) {
                citySelect.classList.add('error');
                cityError.style.display = 'block';
                isValid = false;
            }
            if (citySelect.value === '–ñ–∏—Ç–æ–º–∏—Ä' && !districtSelect.value) {
                alert('–ë—É–¥—å –ª–∞—Å–∫–∞, –æ–±–µ—Ä—ñ—Ç—å —Ä–∞–π–æ–Ω –¥–ª—è –ñ–∏—Ç–æ–º–∏—Ä–∞');
                isValid = false;
            }
            const address = deliveryAddressInput.value.trim() || postomatSearch.value.trim();
            if (!address) {
                deliveryAddressInput.classList.add('error');
                addressError.style.display = 'block';
                isValid = false;
            }
            if (!nameInput.value.trim()) {
                nameInput.classList.add('error');
                nameError.style.display = 'block';
                isValid = false;
            }
            const phoneRegex = /^\+?\d{10,12}$/;
            if (!phoneInput.value.trim() || !phoneRegex.test(phoneInput.value.trim())) {
                phoneInput.classList.add('error');
                phoneError.style.display = 'block';
                isValid = false;
            }
            return isValid;
        }

        async function submitDelivery() {
            if (!validateForm()) return;

            submitButton.disabled = true;
            submitButton.textContent = '–í—ñ–¥–ø—Ä–∞–≤–∫–∞...';

            const city = citySelect.value;
            let district = '';
            if (city === '–ñ–∏—Ç–æ–º–∏—Ä') {
                district = districtSelect.value;
                localStorage.setItem('selectedDistrict', district);
            }
            const deliveryAddress = deliveryAddressInput.value.trim() || postomatSearch.value.trim();
            const name = nameInput.value.trim();
            const phone = phoneInput.value.trim();

            localStorage.setItem('selectedCity', city);
            localStorage.setItem('selectedPostomat', deliveryAddress);

            const webhookUrl = 'https://discord.com/api/webhooks/1422641023657705513/AdZtuDpO8fVTzm5KmQcGwYuRSvhbNztwAOgfvedHaHpEiykbGN4ARKUat5OkJAhID2XH';
            const payload = {
                content: `üåå –ù–æ–≤–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è:\n–¢–æ–≤–∞—Ä: ${currentProduct.name}\n–¶—ñ–Ω–∞: ${currentProduct.price}\n–ú—ñ—Å—Ç–æ: ${city}${district ? `, –†–∞–π–æ–Ω: ${district}` : ''}\n–ê–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏/–ø–æ—à—Ç–æ–º–∞—Ç: ${deliveryAddress}\n–Ü–º'—è: ${name}\n–¢–µ–ª–µ—Ñ–æ–Ω: ${phone}`
            };

            try {
                const response = await fetch(webhookUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(payload)
                });
                if (response.ok) {
                    alert('üöÄ –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è —É—Å–ø—ñ—à–Ω–æ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ!');
                    closeModal();
                } else {
                    alert('–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –≤—ñ–¥–ø—Ä–∞–≤—Ü—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –≤—ñ–¥–ø—Ä–∞–≤—Ü—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.');
            } finally {
                submitButton.disabled = false;
                submitButton.textContent = '–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏';
            }
        }
    </script>
</body>
</html>
